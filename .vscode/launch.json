// {
//     // Use IntelliSense to learn about possible attributes.
//     // Hover to view descriptions of existing attributes.
//     // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
//     "version": "0.2.0",
//     "configurations": [
//         {
//             "name": "Cortex Debug",
//             "cwd": "${workspaceRoot}",
//             "executable": "./bin/executable.elf",
//             "request": "launch",
//             "type": "cortex-debug",
//             "servertype": "jlink"
//         }
//     ]
// }
{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "type": "gdb",
            "request": "attach",
            "name": "Attach to gdbserver",
            "executable": "/work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/itm",
            "target": ":3333",
            "remote": true,
            "cwd": "${workspaceRoot}",
            "autorun": [
                "monitor arm semihosting enable",
                "load /work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/itm",
                "step"
            ],
            "gdbpath": "arm-none-eabi-gdb",
        },
        {
            "type": "gdb",
            "request": "launch",
            "name": "Debug Microcontroller",
            "target": "remote :3333",
            // "executable": "/work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/itm",
            "cwd": "${workspaceRoot}",
            "gdbpath": "arm-none-eabi-gdb",
            "autorun": [
                "monitor arm semihosting enable",
                // "monitor tpwr enable",
                // "monitor swdp_scan",
                // "attach 1",
                "load /work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/itm",
                "step"
            ]
        },
        {
            "type": "cortex-debug",
            "request": "launch",
            "servertype": "openocd",
            "cwd": "${workspaceRoot}",
            // "executable": "/work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/hello",
            "executable": "/work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/asb_blinky",
            // "executable": "/work/stm32f103xx-hal/target/thumbv7m-none-eabi/debug/examples/itm",
            "name": "Debug (OpenOCD)",
            "device": "STM32F103VB",
            "configFiles": [
                "interface/stlink-v2.cfg",
                "target/stm32f1x.cfg"
            ],
            "runToMain": true,
            // "preLaunchCommands": [
            //     "monitor arm semihosting enable",
            //     "monitor tpiu config internal itm.txt uart off 8000000",
            //     //     // "monitor tpiu config external uart off 8000000 2000000",
            //     "monitor itm port 0 on",
            // ],
            // https://github.com/Marus/cortex-debug/issues/77
            "swoConfig": {
                "enabled": true,
                "source": "probe",
                "swoFrequency": 2000000,
                "cpuFrequency": 8000000,
                "decoders": [
                    {
                        "port": 0,
                        "type": "console",
                        "label": "Output"
                    }
                ]
            }
            // "swoConfig": {
            //     "enabled": true,
            //     "cpuFrequency": 8000000,
            //     "swoFrequency": 2000000,
            //     "source": "probe",
            //     "decoders": [
            //         {
            //             "config": {
            //                 "port": 0,
            //                 "label": "my-itm",
            //                 "type": "console",
            //                 "encoding": "utf8",
            //             }
            //             //     "port": 0,
            //             //     "label": "my-itm",
            //             //     "type": "console",
            //             //     "encoding": "utf8",
            //         }
            //     ]
            //     // "enabled": true,
            //     // "swoFrequency": 2000000,
            //     // "cpuFrequency": 8000000,
            //     // "decoders": [
            //     // ],
            //     // "ports": [
            //     //     {
            //     //         "number": 0,
            //     //         "label": "my-itm",
            //     //         "format": "console",
            //     //     }
            //     // ]
            // }
        }
    ]
}